# ============================================================
# WEATHERB ENVIRONMENT VARIABLES (TEMPLATE)
# ============================================================
# Copy this file to `.env` in the project root for development.
# NEVER commit real secrets.
# ============================================================

# ============================================================
# PUBLIC (SAFE FOR CLIENT)
# ============================================================
# 114 = Coston2 testnet, 14 = Flare mainnet
NEXT_PUBLIC_CHAIN_ID=114
NEXT_PUBLIC_CONTRACT_ADDRESS=0x_YOUR_DEPLOYED_CONTRACT_ADDRESS
NEXT_PUBLIC_THIRDWEB_CLIENT_ID=YOUR_THIRDWEB_CLIENT_ID

# ============================================================
# PHASE 0-3: FOUNDATIONS, PROVIDER, CONTRACTS, FDC
# ============================================================

# ----- Database (Epic 0) -----
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/weatherb

# ----- Redis (Epic 0) -----
REDIS_URL=redis://localhost:6379

# ----- Blockchain RPC (Epic 2) -----
# Coston2 Testnet
RPC_URL=https://coston2-api.flare.network/ext/C/rpc
# Flare Mainnet (uncomment when ready)
# RPC_URL=https://flare-api.flare.network/ext/C/rpc

# ----- Contract Deployment (Epic 2) -----
# Generate a fresh wallet for deployments - NEVER use your main wallet
DEPLOYER_PRIVATE_KEY=0x_YOUR_DEPLOYER_PRIVATE_KEY_HERE

# ----- Weather Provider (Epic 1) -----
# Options: met-no | nws | open-meteo
WEATHER_PROVIDER=met-no
# Required User-Agent (MET Norway requires this; also used for NWS).
WEATHER_USER_AGENT=WeatherB/1.0 (contact@example.com)
# Backwards-compatible overrides (optional)
MET_NO_USER_AGENT=WeatherB/1.0 (contact@example.com)
NWS_USER_AGENT=WeatherB/1.0 (contact@example.com)

# ----- Flare Data Connector (Epic 3) -----
# FDC Hub for attestation requests
FDC_HUB_URL=https://fdc-hub.flare.network
# Flare contract registry address (used by `WeatherMarket` constructor).
# Source: flare-foundation/flare-foundry-periphery-package `src/coston2/ContractRegistry.sol`
# Verified:
# - Coston2: `cast call --rpc-url https://coston2-api.flare.network/ext/C/rpc 0xaD67FE66660Fb8dFE9d6b1b4240d8650e30F6019 "getContractAddressByName(string)(address)" "FdcVerification"`
# - Flare:   `cast call --rpc-url https://flare-api.flare.network/ext/C/rpc  0xaD67FE66660Fb8dFE9d6b1b4240d8650e30F6019 "getContractAddressByName(string)(address)" "FdcVerification"`
FLARE_CONTRACT_REGISTRY_ADDRESS=0xaD67FE66660Fb8dFE9d6b1b4240d8650e30F6019


# ============================================================
# PHASE 4-5: AUTOMATION SERVICES, WEB APP
# ============================================================

# ----- Settlement Bot (Epic 4) -----
# Generate a fresh wallet - fund with FLR for gas
SETTLER_PRIVATE_KEY=0x_YOUR_SETTLER_PRIVATE_KEY_HERE

# ----- Market Scheduler (Epic 4) -----
# Generate a fresh wallet - fund with FLR for gas
SCHEDULER_PRIVATE_KEY=0x_YOUR_SCHEDULER_PRIVATE_KEY_HERE

# ----- Scheduler Config (Epic 4) -----
DAILY_MARKET_COUNT=5
# Evenly distribute markets across the day (default derived from DAILY_MARKET_COUNT if unset).
MARKET_SPACING_HOURS=4.8
# Cron expression for daily market creation (default: midnight UTC)
SCHEDULE_TIME_CRON=0 0 * * *

# ----- Settler Config (Epic 4) -----
MAX_SETTLEMENT_RETRIES=5
SETTLEMENT_POLL_INTERVAL_MS=60000
SETTLEMENT_BACKOFF_MS=5000
SETTLEMENT_WORKER_CONCURRENCY=3

# ----- Shared (Epic 4) -----
# Deployed WeatherMarket contract address
CONTRACT_ADDRESS=0x_YOUR_DEPLOYED_CONTRACT_ADDRESS

# ----- Vercel Cron (Epic 4) -----
# Upstash Redis for city rotation state (serverless Redis)
UPSTASH_REDIS_REST_URL=https://YOUR_UPSTASH_URL.upstash.io
UPSTASH_REDIS_REST_TOKEN=AXxxxx_YOUR_TOKEN_HERE
# Secret for Vercel Cron authentication (generate with: openssl rand -hex 32)
CRON_SECRET=_GENERATE_A_32_BYTE_HEX_SECRET

# ============================================================
# PHASE 6-8: ADMIN, VOTING, AI REPORTS
# ============================================================

# ----- Admin Panel (Epic 6) -----
# Single admin wallet address (V1)
ADMIN_WALLET_ADDRESS=0x_YOUR_ADMIN_WALLET_ADDRESS
# Backwards-compatible (comma-separated allowlist)
ADMIN_WALLETS=0x_YOUR_ADMIN_WALLET_ADDRESS
# Private key for admin contract calls (must be contract owner)
# Generate a fresh wallet - fund with FLR for gas
ADMIN_PRIVATE_KEY=0x_YOUR_ADMIN_PRIVATE_KEY_HERE
# Block number where WeatherMarket was deployed (used for admin metrics)
CONTRACT_DEPLOY_BLOCK=0

# ----- Email Reports (Epic 8) -----
# Get from resend.com
RESEND_API_KEY=re_YOUR_RESEND_API_KEY
# Where weekly AI reports are sent
ADMIN_REPORT_EMAIL=your-email@example.com

# ----- AI Summary (Epic 8) -----
# Get from platform.openai.com
OPENAI_API_KEY=sk-YOUR_OPENAI_API_KEY

# ----- Magic Links (Epic 8) -----
# Generate with: openssl rand -hex 32
MAGIC_LINK_SECRET=_GENERATE_A_32_BYTE_HEX_SECRET

# ----- App URL (Epic 8) -----
# Used for magic link generation
APP_URL=http://localhost:3000


# ============================================================
# PHASE 9-10: INDEXING, SECURITY, MONITORING
# ============================================================

# ----- Alerts (Epic 9, 10) -----
# Discord webhook for critical alerts (optional)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK

# ----- Logging (Epic 9) -----
LOG_LEVEL=info
# Options: trace | debug | info | warn | error
